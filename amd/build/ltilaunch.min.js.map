{"version":3,"sources":["../src/ltilaunch.js"],"names":["main","course","cmid","attr","then","buttonStr","newButton","append","on","e","preventDefault","window","open","Config","wwwroot","click"],"mappings":"kLAuBA,OACA,O,uXAGqBA,CAAAA,C,6EACLC,C,CAAQC,C,CAAM,CACtB,GAAIA,CAAI,EAA6B,sBAAzB,iBAAE,MAAF,EAAUC,IAAV,CAAe,IAAf,CAAZ,CAA6D,CAGzD,iBAAU,mBAAV,CAA+B,gBAA/B,EAAiDC,IAAjD,CAAsD,SAACC,CAAD,CAAe,CAEjE,GAAMC,CAAAA,CAAS,iFAAwED,CAAxE,aAAf,CACA,cAAE,kCAAF,EAAsCE,MAAtC,CAA6CD,CAA7C,CACH,CAJD,EAMA,cAAE,kCAAF,EAAsCE,EAAtC,CAAyC,OAAzC,CAAkD,oBAAlD,CAAwE,SAACC,CAAD,CAAO,CAC3EA,CAAC,CAACC,cAAF,GACAC,MAAM,CAACC,IAAP,WAAeC,UAAOC,OAAtB,8CAAkEb,CAAlE,kBAAiFC,CAAjF,EACH,CAHD,CAIH,CAbD,IAaO,IAA6B,mBAAzB,iBAAE,MAAF,EAAUC,IAAV,CAAe,IAAf,CAAJ,CAAkD,CAGrD,iBAAU,kBAAV,CAA8B,gBAA9B,EAAgDC,IAAhD,CAAqD,SAACC,CAAD,CAAe,CAEhE,GAAMC,CAAAA,CAAS,iFAAwED,CAAxE,aAAf,CACA,cAAE,oBAAF,EAAwBE,MAAxB,CAA+BD,CAA/B,EACA,cAAE,oBAAF,EAAwBS,KAAxB,CAA8B,SAACN,CAAD,CAAO,CACjCA,CAAC,CAACC,cAAF,GACAC,MAAM,CAACC,IAAP,WAAeC,UAAOC,OAAtB,8CAAkEb,CAAlE,EACH,CAHD,CAIH,CARD,CASH,CACJ,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Feedback lti launch code.\n * @package     local_feedback\n * @author      Guy Thomas\n * @copyright   2021 Citricity Ltd\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from \"jquery\";\nimport Config from 'core/config';\nimport {get_string as getString} from \"core/str\";\n\nexport default class main {\n    static init(course, cmid) {\n        if (cmid && $(\"body\").attr(\"id\") === \"page-mod-assign-view\") {\n            // Add button to mod assign page.\n\n            getString(\"launchfeedbacklti\", \"local_feedback\").then((buttonStr) => {\n                // Append to grading summary\n                const newButton = `<button class=\"btn btn btn-secondary ml-1\" id=\"launchfeedbacklti\">${buttonStr}</button>`;\n                $(\".gradingsummary .submissionlinks\").append(newButton);\n            });\n\n            $(\".gradingsummary .submissionlinks\").on(\"click\", \"#launchfeedbacklti\", (e) => {\n                e.preventDefault();\n                window.open(`${Config.wwwroot}/local/feedback/launch.php?course=${course}&cmid=${cmid}`);\n            });\n        } else if ($(\"body\").attr(\"id\") === \"page-user-profile\") {\n            // Add launch button to user profile page.\n\n            getString(\"openfeedbacktool\", \"local_feedback\").then((buttonStr) => {\n                // Append to grading summary\n                const newButton = `<button class=\"btn btn btn-secondary ml-1\" id=\"launchfeedbacklti\">${buttonStr}</button>`;\n                $(\"#page-navbar + div\").append(newButton);\n                $(\"#launchfeedbacklti\").click((e) => {\n                    e.preventDefault();\n                    window.open(`${Config.wwwroot}/local/feedback/launch.php?course=${course}`);\n                });\n            });\n        }\n    }\n}"],"file":"ltilaunch.min.js"}